{"version":3,"sources":["components/itemTable/Title.tsx","components/itemTable/Cell.tsx","utils.ts","stores/ItemStore.ts","dataSet.ts","contexts/storesContext.tsx","hooks/useStores.ts","components/itemTable/Row.tsx","components/itemTable/Table.tsx","index.tsx","App.tsx"],"names":["Title","title","StyledTitle","styled","th","Cell","text","StyledCell","td","enrichItemsWithId","items","map","item","id","uuidV4","kids","Object","entries","reduce","acc","kid","records","ItemStore","getEnrichedItems","flow","this","enrichedItems","state","Promise","resolve","setTimeout","data","Name","Gender","Risk","IQ","has_relatives","has_phone","Phone","idToFilter","filterItemsById","filter","filterKidsById","itemId","observable","action","storesContext","React","createContext","itemStore","useStores","useContext","doesKidsHaveRecords","values","value","flat","Infinity","length","Row","cellsData","rootColumnCount","useState","shouldExpand","setShouldExpand","kidsContainerNames","keys","StyledRow","StyledButtons","StyledDeleteButton","onClick","deleteItem","prevShouldExpand","cellText","idx","key","colSpan","name","tableName","tr","button","Table","useObserver","headings","rowsToDisplay","kidsList","StyledTable","data-testid","cellPadding","StyledTableName","StyledHeading","StyledButtonsHeader","table","ReactDOM","render","useEffect","document","getElementById"],"mappings":"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","file":"static/js/main.1ae9c3ae.chunk.js","sourcesContent":["import React from 'react';\nimport styled from 'styled-components';\n\nexport const Title: React.FC<{ title: string }> = ({ title }) => {\n  return <StyledTitle>{title}</StyledTitle>;\n};\n\nconst StyledTitle = styled.th`\n  font-size: 20px;\n  font-weight: bold;\n  padding: 5px 10px;\n`;\n","import React from 'react';\nimport styled from 'styled-components';\n\nexport const Cell: React.FC<{ text: string }> = ({ text }) => {\n  return <StyledCell>{text}</StyledCell>;\n};\n\nconst StyledCell = styled.td`\n  border-right: solid 1px;\n  border-left: solid 1px;\n`;\n","import { v4 as uuidV4 } from 'uuid';\n\nimport { Kids, Item } from './types';\n\nexport function enrichKidsWithId(kids: Kids | {}) {\n  const enrichedKids: Kids = {};\n\n  return Object.entries(kids).reduce((acc, kid) => {\n    acc[kid[0]] = { records: enrichItemsWithId(kid[1].records) };\n    return acc;\n  }, enrichedKids);\n}\n\nexport function enrichItemsWithId(items: Omit<Item, 'id'>[]): Item[] {\n  return items.map(item => ({ ...item, id: uuidV4(), kids: enrichKidsWithId(item.kids) }));\n}\n","import { observable, action, flow } from 'mobx';\n\nimport { getItems } from '../dataSet';\nimport { Item, Kids } from '../types';\nimport { enrichItemsWithId } from '../utils';\n\nexport class ItemStore {\n  @observable enrichedItems: Item[] = [];\n  @observable state = 'pending';\n\n  filterKidsById(kids: Kids | {}, idToFilter: string) {\n    const filteredKids: Kids = {};\n\n    return Object.entries(kids).reduce((acc, kid) => {\n      acc[kid[0]] = { records: this.filterItemsById(kid[1].records, idToFilter) };\n      return acc;\n    }, filteredKids);\n  }\n\n  filterItemsById(items: Item[], idToFilter: string) {\n    const itemsFilteredOnCurrentLevel = items.filter(item => item.id !== idToFilter);\n    return itemsFilteredOnCurrentLevel.map(item => ({ ...item, kids: this.filterKidsById(item.kids, idToFilter) }));\n  }\n\n  getEnrichedItems = flow(function*(this: ItemStore) {\n    this.enrichedItems = [];\n    this.state = 'pending';\n\n    const items: Omit<Item, 'id'>[] = yield getItems();\n\n    this.enrichedItems = enrichItemsWithId(items);\n    this.state = 'done';\n  });\n\n  @action deleteItem(itemId: string) {\n    this.enrichedItems = this.filterItemsById(this.enrichedItems, itemId);\n  }\n}\n","export function getItems() {\n  return new Promise(resolve => {\n    setTimeout(\n      () =>\n        resolve([\n          {\n            data: {\n              'Identification number': '34',\n              Name: 'Joqmo',\n              Gender: 'female',\n              Risk: 'BITES',\n              'Hair length': '6.2000000000',\n              IQ: '98',\n              'Admission date': 'Mon Dec 13 00:00:00 CET 1993',\n              'Last breakdown': 'Wed Dec 24 07:14:50 CET 2014',\n              'Yearly fee': '67035',\n              'Knows the Joker?': 'true'\n            },\n            kids: {\n              has_relatives: {\n                records: [\n                  {\n                    data: {\n                      'Relative ID': '1007',\n                      'Patient ID': '34',\n                      'Is alive?': 'true',\n                      'Frequency of visits': '29'\n                    },\n                    kids: {\n                      has_phone: {\n                        records: [\n                          {\n                            data: {\n                              'Phone ID': '2008',\n                              'ID of the relative': '1007',\n                              Phone: '+(179)-982-0570'\n                            },\n                            kids: {}\n                          }\n                        ]\n                      }\n                    }\n                  }\n                ]\n              }\n            }\n          },\n          {\n            data: {\n              'Identification number': '35',\n              Name: 'Jason',\n              Gender: 'm',\n              Risk: 'BITES',\n              'Hair length': '1.6000000000',\n              IQ: '91',\n              'Admission date': 'Mon Feb 17 00:00:00 CET 1997',\n              'Last breakdown': 'Wed Dec 03 03:09:55 CET 2014',\n              'Yearly fee': '67932',\n              'Knows the Joker?': 'false'\n            },\n            kids: {}\n          },\n          {\n            data: {\n              'Identification number': '38',\n              Name: 'Julliane',\n              Gender: 'm',\n              Risk: 'EVIL_EYE',\n              'Hair length': '1.0000000000',\n              IQ: '100',\n              'Admission date': 'Wed Aug 05 00:00:00 CEST 1992',\n              'Last breakdown': 'Wed Oct 29 12:59:39 CET 2014',\n              'Yearly fee': '57167',\n              'Knows the Joker?': 'true'\n            },\n            kids: {\n              has_relatives: {\n                records: [\n                  {\n                    data: {\n                      'Relative ID': '1043',\n                      'Patient ID': '38',\n                      'Is alive?': 'false',\n                      'Frequency of visits': '24'\n                    },\n                    kids: {\n                      has_phone: {\n                        records: [\n                          {\n                            data: {\n                              'Phone ID': '479',\n                              'ID of the relative': '1043',\n                              Phone: '+(123)-408--5901'\n                            },\n                            kids: {}\n                          },\n                          {\n                            data: {\n                              'Phone ID': '2470',\n                              'ID of the relative': '1043',\n                              Phone: '546 765-7237'\n                            },\n                            kids: {}\n                          }\n                        ]\n                      }\n                    }\n                  },\n                  {\n                    data: {\n                      'Relative ID': '1475',\n                      'Patient ID': '38',\n                      'Is alive?': 'true',\n                      'Frequency of visits': '38'\n                    },\n                    kids: {\n                      has_phone: {\n                        records: [\n                          {\n                            data: {\n                              'Phone ID': '2751',\n                              'ID of the relative': '1475',\n                              Phone: '(416) 307-5637'\n                            },\n                            kids: {}\n                          },\n                          {\n                            data: {\n                              'Phone ID': '3148',\n                              'ID of the relative': '1475',\n                              Phone: '943 1104931'\n                            },\n                            kids: {}\n                          }\n                        ]\n                      }\n                    }\n                  },\n                  {\n                    data: {\n                      'Relative ID': '1594',\n                      'Patient ID': '38',\n                      'Is alive?': 'true',\n                      'Frequency of visits': '25'\n                    },\n                    kids: {\n                      has_phone: {\n                        records: [\n                          {\n                            data: {\n                              'Phone ID': '2364',\n                              'ID of the relative': '1594',\n                              Phone: '+(832) 472-8423'\n                            },\n                            kids: {}\n                          },\n                          {\n                            data: {\n                              'Phone ID': '2759',\n                              'ID of the relative': '1594',\n                              Phone: '+(832) 5336603'\n                            },\n                            kids: {}\n                          }\n                        ]\n                      }\n                    }\n                  }\n                ]\n              }\n            }\n          },\n          {\n            data: {\n              'Identification number': '52',\n              Name: 'Alice',\n              Gender: 'F',\n              Risk: 'ATTACKS_NURSES',\n              'Hair length': '0.8000000000',\n              IQ: '107',\n              'Admission date': 'Thu May 31 00:00:00 CEST 2001',\n              'Last breakdown': 'Sun Dec 21 11:57:06 CET 2014',\n              'Yearly fee': '62534',\n              'Knows the Joker?': 'true'\n            },\n            kids: {\n              has_relatives: {\n                records: [\n                  {\n                    data: {\n                      'Relative ID': '1683',\n                      'Patient ID': '52',\n                      'Is alive?': 'true',\n                      'Frequency of visits': '28'\n                    },\n                    kids: {\n                      has_phone: {\n                        records: [\n                          {\n                            data: {\n                              'Phone ID': '1404',\n                              'ID of the relative': '1683',\n                              Phone: '+546-382--6016'\n                            },\n                            kids: {}\n                          },\n                          {\n                            data: {\n                              'Phone ID': '1415',\n                              'ID of the relative': '1683',\n                              Phone: '627-097--6349'\n                            },\n                            kids: {}\n                          },\n                          {\n                            data: {\n                              'Phone ID': '2505',\n                              'ID of the relative': '1683',\n                              Phone: '789-902-8231'\n                            },\n                            kids: {}\n                          },\n                          {\n                            data: {\n                              'Phone ID': '3479',\n                              'ID of the relative': '1683',\n                              Phone: '+943-234-5871'\n                            },\n                            kids: {}\n                          }\n                        ]\n                      }\n                    }\n                  }\n                ]\n              }\n            }\n          },\n          {\n            data: {\n              'Identification number': '86',\n              Name: 'Jason',\n              Gender: 'M',\n              Risk: 'BITES',\n              'Hair length': '3.0000000000',\n              IQ: '104',\n              'Admission date': 'Mon Jan 08 00:00:00 CET 2001',\n              'Last breakdown': 'Wed Oct 15 12:21:59 CEST 2014',\n              'Yearly fee': '63052',\n              'Knows the Joker?': 'true'\n            },\n            kids: {\n              has_relatives: {\n                records: [\n                  {\n                    data: {\n                      'Relative ID': '116',\n                      'Patient ID': '86',\n                      'Is alive?': 'true',\n                      'Frequency of visits': '35'\n                    },\n                    kids: {\n                      has_phone: {\n                        records: [\n                          {\n                            data: {\n                              'Phone ID': '928',\n                              'ID of the relative': '116',\n                              Phone: '+943 932-8626'\n                            },\n                            kids: {}\n                          },\n                          {\n                            data: {\n                              'Phone ID': '2191',\n                              'ID of the relative': '116',\n                              Phone: '+(416)-960--6030'\n                            },\n                            kids: {}\n                          },\n                          {\n                            data: {\n                              'Phone ID': '2820',\n                              'ID of the relative': '116',\n                              Phone: '(416) 747-7856'\n                            },\n                            kids: {}\n                          }\n                        ]\n                      }\n                    }\n                  }\n                ]\n              }\n            }\n          },\n          {\n            data: {\n              'Identification number': '94',\n              Name: 'August',\n              Gender: 'male',\n              Risk: 'qwutdf',\n              'Hair length': '0.3000000000',\n              IQ: '96',\n              'Admission date': 'Fri Jan 03 00:00:00 CET 1997',\n              'Last breakdown': 'Fri Sep 19 01:26:31 CEST 2014',\n              'Yearly fee': '46901',\n              'Knows the Joker?': 'true'\n            },\n            kids: {\n              has_relatives: {\n                records: [\n                  {\n                    data: {\n                      'Relative ID': '758',\n                      'Patient ID': '94',\n                      'Is alive?': 'true',\n                      'Frequency of visits': '34'\n                    },\n                    kids: {\n                      has_phone: {\n                        records: [\n                          {\n                            data: {\n                              'Phone ID': '2322',\n                              'ID of the relative': '758',\n                              Phone: '(416)-866-3803'\n                            },\n                            kids: {}\n                          }\n                        ]\n                      }\n                    }\n                  },\n                  {\n                    data: {\n                      'Relative ID': '1405',\n                      'Patient ID': '94',\n                      'Is alive?': 'true',\n                      'Frequency of visits': '34'\n                    },\n                    kids: {\n                      has_phone: {\n                        records: [\n                          {\n                            data: {\n                              'Phone ID': '3270',\n                              'ID of the relative': '1405',\n                              Phone: '546-4646769'\n                            },\n                            kids: {}\n                          }\n                        ]\n                      }\n                    }\n                  }\n                ]\n              }\n            }\n          },\n          {\n            data: {\n              'Identification number': '99',\n              Name: 'Carl',\n              Gender: 'M',\n              Risk: 'EVIL_EYE',\n              'Hair length': '1.5000000000',\n              IQ: '96',\n              'Admission date': 'Sat Sep 02 00:00:00 CEST 1989',\n              'Last breakdown': 'Wed Nov 12 02:33:57 CET 2014',\n              'Yearly fee': '57992',\n              'Knows the Joker?': 'false'\n            },\n            kids: {\n              has_relatives: {\n                records: [\n                  {\n                    data: {\n                      'Relative ID': '324',\n                      'Patient ID': '99',\n                      'Is alive?': 'true',\n                      'Frequency of visits': ''\n                    },\n                    kids: {\n                      has_phone: {\n                        records: [\n                          {\n                            data: {\n                              'Phone ID': '1821',\n                              'ID of the relative': '324',\n                              Phone: '+(832) 263-3093'\n                            },\n                            kids: {}\n                          }\n                        ]\n                      }\n                    }\n                  }\n                ]\n              }\n            }\n          },\n          {\n            data: {\n              'Identification number': '108',\n              Name: 'Helmut',\n              Gender: 'm',\n              Risk: 'EVIL_EYE',\n              'Hair length': '3.0000000000',\n              IQ: '106',\n              'Admission date': 'Sun Jan 29 00:00:00 CET 1995',\n              'Last breakdown': 'Thu Nov 27 12:46:16 CET 2014',\n              'Yearly fee': '55898',\n              'Knows the Joker?': 'true'\n            },\n            kids: {\n              has_relatives: {\n                records: [\n                  {\n                    data: {\n                      'Relative ID': '454',\n                      'Patient ID': '108',\n                      'Is alive?': 'true',\n                      'Frequency of visits': '27'\n                    },\n                    kids: {\n                      has_phone: {\n                        records: [\n                          {\n                            data: {\n                              'Phone ID': '946',\n                              'ID of the relative': '454',\n                              Phone: '546-771-7091'\n                            },\n                            kids: {}\n                          },\n                          {\n                            data: {\n                              'Phone ID': '2945',\n                              'ID of the relative': '454',\n                              Phone: '(416) 639-2176'\n                            },\n                            kids: {}\n                          }\n                        ]\n                      }\n                    }\n                  },\n                  {\n                    data: {\n                      'Relative ID': '1410',\n                      'Patient ID': '108',\n                      'Is alive?': 'false',\n                      'Frequency of visits': '30'\n                    },\n                    kids: {\n                      has_phone: {\n                        records: [\n                          {\n                            data: {\n                              'Phone ID': '676',\n                              'ID of the relative': '1410',\n                              Phone: '627-144-0383'\n                            },\n                            kids: {}\n                          },\n                          {\n                            data: {\n                              'Phone ID': '2177',\n                              'ID of the relative': '1410',\n                              Phone: '+627-568-9247'\n                            },\n                            kids: {}\n                          }\n                        ]\n                      }\n                    }\n                  }\n                ]\n              }\n            }\n          },\n          {\n            data: {\n              'Identification number': '109',\n              Name: 'Jones',\n              Gender: '',\n              Risk: 'NULL',\n              'Hair length': '2.5000000000',\n              IQ: '101',\n              'Admission date': 'Sun Apr 02 00:00:00 CEST 1989',\n              'Last breakdown': 'Sun Nov 23 09:50:35 CET 2014',\n              'Yearly fee': '56742',\n              'Knows the Joker?': ''\n            },\n            kids: {\n              has_relatives: {\n                records: [\n                  {\n                    data: {\n                      'Relative ID': '24',\n                      'Patient ID': '109',\n                      'Is alive?': 'true',\n                      'Frequency of visits': '36'\n                    },\n                    kids: {\n                      has_phone: {\n                        records: [\n                          {\n                            data: {\n                              'Phone ID': '213',\n                              'ID of the relative': '24',\n                              Phone: '+627-590-0044'\n                            },\n                            kids: {}\n                          },\n                          {\n                            data: {\n                              'Phone ID': '942',\n                              'ID of the relative': '24',\n                              Phone: '(832)-274--5472'\n                            },\n                            kids: {}\n                          },\n                          {\n                            data: {\n                              'Phone ID': '1338',\n                              'ID of the relative': '24',\n                              Phone: '(416) 836-7224'\n                            },\n                            kids: {}\n                          }\n                        ]\n                      }\n                    }\n                  },\n                  {\n                    data: {\n                      'Relative ID': '1535',\n                      'Patient ID': '109',\n                      'Is alive?': 'true',\n                      'Frequency of visits': '25'\n                    },\n                    kids: {\n                      has_phone: {\n                        records: [\n                          {\n                            data: {\n                              'Phone ID': '3045',\n                              'ID of the relative': '1535',\n                              Phone: '+627-709-7332'\n                            },\n                            kids: {}\n                          },\n                          {\n                            data: {\n                              'Phone ID': '3103',\n                              'ID of the relative': '1535',\n                              Phone: '+627-234-9905'\n                            },\n                            kids: {}\n                          }\n                        ]\n                      }\n                    }\n                  }\n                ]\n              }\n            }\n          },\n          {\n            data: {\n              'Identification number': '120',\n              Name: 'Jakqe',\n              Gender: 'M',\n              Risk: 'BITES',\n              'Hair length': '1.3000000000',\n              IQ: '104',\n              'Admission date': 'Mon Oct 09 00:00:00 CEST 2000',\n              'Last breakdown': 'Wed Oct 22 11:52:08 CEST 2014',\n              'Yearly fee': '59076',\n              'Knows the Joker?': 'false'\n            },\n            kids: {\n              has_relatives: {\n                records: [\n                  {\n                    data: {\n                      'Relative ID': '1128',\n                      'Patient ID': '120',\n                      'Is alive?': 'true',\n                      'Frequency of visits': '39'\n                    },\n                    kids: {}\n                  },\n                  {\n                    data: {\n                      'Relative ID': '1320',\n                      'Patient ID': '120',\n                      'Is alive?': 'true',\n                      'Frequency of visits': '38'\n                    },\n                    kids: {\n                      has_phone: {\n                        records: [\n                          {\n                            data: {\n                              'Phone ID': '1019',\n                              'ID of the relative': '1320',\n                              Phone: '+(832)-374-2058'\n                            },\n                            kids: {}\n                          },\n                          {\n                            data: {\n                              'Phone ID': '3844',\n                              'ID of the relative': '1320',\n                              Phone: '(179)-827--4556'\n                            },\n                            kids: {}\n                          }\n                        ]\n                      }\n                    }\n                  }\n                ]\n              }\n            }\n          },\n          {\n            data: {\n              'Identification number': '124',\n              Name: 'June',\n              Gender: 'M',\n              Risk: 'ATTACKS_NURSES',\n              'Hair length': '2.2000000000',\n              IQ: '100',\n              'Admission date': 'Mon Apr 03 00:00:00 CEST 1989',\n              'Last breakdown': 'Thu Dec 25 04:43:17 CET 2014',\n              'Yearly fee': '57032',\n              'Knows the Joker?': 'true'\n            },\n            kids: {\n              has_relatives: {\n                records: [\n                  {\n                    data: {\n                      'Relative ID': '1499',\n                      'Patient ID': '124',\n                      'Is alive?': '',\n                      'Frequency of visits': '33'\n                    },\n                    kids: {\n                      has_phone: {\n                        records: [\n                          {\n                            data: {\n                              'Phone ID': '210',\n                              'ID of the relative': '1499',\n                              Phone: '+(179) 0415701'\n                            },\n                            kids: {}\n                          },\n                          {\n                            data: {\n                              'Phone ID': '909',\n                              'ID of the relative': '1499',\n                              Phone: '+789-830--2279'\n                            },\n                            kids: {}\n                          },\n                          {\n                            data: {\n                              'Phone ID': '2610',\n                              'ID of the relative': '1499',\n                              Phone: '+(123) 602--0766'\n                            },\n                            kids: {}\n                          }\n                        ]\n                      }\n                    }\n                  }\n                ]\n              }\n            }\n          }\n        ]),\n      2000\n    );\n  });\n}\n","import React from 'react';\n\nimport { ItemStore } from '../stores/ItemStore';\n\nexport const storesContext = React.createContext({\n  itemStore: new ItemStore()\n});\n","import { useContext } from 'react';\n\nimport { storesContext } from '../contexts/storesContext';\n\nexport const useStores = () => useContext(storesContext);\n","import React, { useState } from 'react';\nimport styled from 'styled-components';\n\nimport { Cell } from './Cell';\nimport { Kids } from '../../types';\nimport { Table } from './Table';\nimport { useStores } from '../../hooks/useStores';\n\ntype Props = {\n  cellsData: string[];\n  kids: Kids;\n  itemId: string;\n  rootColumnCount?: number;\n};\n\nexport const doesKidsHaveRecords = (kids: Kids) => {\n  return !!Object.values(kids)\n    .map(value => value.records)\n    .flat(Infinity).length;\n};\n\nexport const Row: React.FC<Props> = ({ cellsData, kids, rootColumnCount, itemId }) => {\n  const [shouldExpand, setShouldExpand] = useState(false);\n  const { itemStore } = useStores();\n\n  const kidsContainerNames = Object.keys(kids);\n\n  return (\n    <>\n      <StyledRow>\n        <StyledButtons>\n          <StyledDeleteButton onClick={() => itemStore.deleteItem(itemId)}>delete</StyledDeleteButton>\n          {doesKidsHaveRecords(kids) && (\n            <button onClick={() => setShouldExpand(prevShouldExpand => !prevShouldExpand)}>\n              {shouldExpand ? 'Wrap' : 'Expand'}\n            </button>\n          )}\n        </StyledButtons>\n        {cellsData.map((cellText, idx) => (\n          <Cell text={cellText} key={idx} />\n        ))}\n      </StyledRow>\n      {doesKidsHaveRecords(kids) && shouldExpand && (\n        <tr>\n          <td colSpan={rootColumnCount}>\n            {kidsContainerNames.map((name, idx) => (\n              <Table items={kids[name].records} tableName={name} key={idx} rootColumnCount={rootColumnCount} />\n            ))}\n          </td>\n        </tr>\n      )}\n    </>\n  );\n};\n\nconst StyledRow = styled.tr`\n  border: solid 1px;\n`;\n\nconst StyledButtons = styled.td`\n  display: flex;\n  justify-content: space-evenly;\n\n  & button {\n    width: 100%;\n    border-radius: 5px;\n    font-weight: bold;\n    margin-right: 10px;\n  }\n\n  & button:last-child {\n    margin-right: 0;\n  }\n`;\n\nconst StyledDeleteButton = styled.button`\n  background-color: red;\n  color: white;\n`;\n","import React from 'react';\nimport styled from 'styled-components';\nimport { useObserver } from 'mobx-react';\n\nimport { Item } from '../../types';\nimport { Title } from './Title';\nimport { Row } from './Row';\n\ntype Props = {\n  items: Item[];\n  tableName?: string;\n  rootColumnCount?: number;\n};\n\nexport const Table: React.FC<Props> = ({ items, tableName }) => {\n  return useObserver(() => {\n    if (items.length) {\n      // assumption - items on the same level have consistent data keys\n      const headings = Object.keys(items[0].data);\n      const rowsToDisplay = items.map(item => ({ cellsData: Object.values(item.data), itemId: item.id }));\n      const kidsList = items.map(item => item.kids);\n\n      return (\n        <StyledTable data-testid=\"item-table\" cellPadding={10}>\n          <thead>\n            <tr>\n              <StyledTableName>{tableName}</StyledTableName>\n            </tr>\n            <StyledHeading>\n              <StyledButtonsHeader />\n              {headings.map((title, idx) => (\n                <Title title={title} key={idx} />\n              ))}\n            </StyledHeading>\n          </thead>\n          <tbody>\n            {rowsToDisplay.map(({ cellsData, itemId }, idx) => (\n              <Row\n                cellsData={cellsData}\n                kids={kidsList[idx]}\n                itemId={itemId}\n                rootColumnCount={headings.length + 1 /* +1 to accomodate the column for expand button*/}\n                key={itemId}\n              />\n            ))}\n          </tbody>\n        </StyledTable>\n      );\n    }\n\n    return null;\n  });\n};\n\nconst StyledTable = styled.table`\n  border-collapse: collapse;\n  width: 100%;\n  margin-bottom: 20px;\n`;\n\nconst StyledHeading = styled.tr`\n  background-color: lightgray;\n  border: solid 1px;\n`;\n\nconst StyledTableName = styled.td`\n  font-size: 25px;\n  font-weight: bold;\n`;\n\nconst StyledButtonsHeader = styled.th`\n  /* Explicit width ensures all nested tables have equally wide first column which contains buttons */\n  width: 1px;\n`;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport { App } from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n","import React, { useEffect } from 'react';\nimport { useObserver } from 'mobx-react';\n\nimport { Table } from './components/itemTable/Table';\nimport { useStores } from './hooks/useStores';\n\nexport const App = () => {\n  const { itemStore } = useStores();\n\n  useEffect(() => {\n    itemStore.getEnrichedItems();\n  }, [itemStore]);\n\n  return useObserver(() => {\n    if (itemStore.state === 'pending') {\n      return <div>Loading...</div>;\n    }\n\n    return <Table items={itemStore.enrichedItems} />;\n  });\n};\n"],"sourceRoot":""}